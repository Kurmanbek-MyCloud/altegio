# üí≥ –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –¥–∏–ø–ª–∏–Ω–∫–∞–º–∏

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü –æ–ø–ª–∞—Ç—ã —Å –¥–∏–ø–ª–∏–Ω–∫–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω–∞.

## üéØ –ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç

- **–ö—Ä–∞—Å–∏–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã** —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–ª–∞—Ç–µ–∂–µ
- **–î–∏–ø–ª–∏–Ω–∫–∏ –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã**: MBank, ODengi, Balance, Optima Bank
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** QR-–∫–æ–¥–æ–≤ –æ—Ç Optima Bank
- **API endpoint** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- **–í—à–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** –≤ —Å—Å—ã–ª–∫–∏ (—Å—É–º–º–∞, —Ç–µ–ª–µ—Ñ–æ–Ω, ID –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞)

## üìã –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã

- **`payment_page.php`** - –∫—Ä–∞—Å–∏–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã —Å –¥–∏–ø–ª–∏–Ω–∫–∞–º–∏
- **`payment_api.php`** - API endpoint –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **`test_payment_api.html`** - —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è API

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**
- API –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –ø–ª–∞—Ç–µ–∂–µ
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç QR-–∫–æ–¥—ã –æ—Ç Optima Bank
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

### 2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫**
- –°–æ–∑–¥–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∏–ø–ª–∏–Ω–∫–∏ –¥–ª—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- –í—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å—Å—ã–ª–∫–∏

### 3. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–ª–∞—Ç–µ–∂–µ
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç QR-–∫–æ–¥ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∏–ø–ª–∏–Ω–∫–∏ –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
cp payment_page.php /var/www/html/
cp payment_api.php /var/www/html/
cp test_payment_api.html /var/www/html/
```

### 2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞**
–ó–∞–º–µ–Ω–∏—Ç–µ `https://your-domain.com` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω –≤ —Ñ–∞–π–ª–∞—Ö:
- `payment_api.php` (—Å—Ç—Ä–æ–∫–∞ 200)
- `payment_page.php` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### 3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
–û—Ç–∫—Ä–æ–π—Ç–µ `test_payment_api.html` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.

## üì° API Endpoints

### **POST /payment_api.php**

#### –¢–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

##### 1. **Optima QR Request**
```json
{
    "type": "optima_qr",
    "qrUrl": "https://optimabank.kg/index.php?lang=ru#00020101021132650011QR.Optima.20103213101610918209361301831107176085812021113021233360032473798579d3144969cd3f75b299dadf65204999953034175907ZENTARA6304660E",
    "qrBase64": "iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAIAAAD2HxkiAABYZklEQVR4Xu29C7RnV13n+U89gPBwhBmHqvt+36pUEggEUBFaxMZWQFoQe0SQFkdbGdaawTHSjTi6uic2gt22jroQbKftaaebcogCM8ZlaxAQERISkoK8U5WkHvd9/+/3487e/5M62f/v3vt79u+c8783rnU/XklV/d77cfbj/h+FvUMOOeRAKeA/HHLIIfvL4SQ85JAD5nASHnLIAXM4CQ855IA5nISHHHLAHE7CQw45YIImYafTOXv27Dvf+c7l5eXnP//5BQlKX1kpW+VB+UHXlCeeeOL1r3/9a571LNPh0aNHU/9VuVIOlduQQFxZ1UWkopx9gTg8DY4zSV8aWQIBzri8cQLbyunZp8zZ/9GePAlvu+22xcVFjJYK5Ud5wwB+vvd7vxdd5IFyGx6IK3OpCNsVh6fBIUnarrIEAkhcEXYaxLOtTDiQ0c4mYb/fv+WWW9B3ZpRP5RmDuXjBC16Axnnw7Gc/OzyQEhFlW6qcG9YCbFccngYnx3pFkLgi7DSIZ7u7nRzgaGe.....",
    "amount": 2000,
    "phone": "+79001234567",
    "subscription_id": "12345",
    "client_id": "67890"
}
```

##### 2. **Subscription Payment**
```json
{
    "type": "subscription_payment",
    "amount": 1500,
    "phone": "+79001234567",
    "subscription_id": "12345",
    "client_id": "67890",
    "type": "renewal"
}
```

##### 3. **Custom Payment**
```json
{
    "type": "custom_payment",
    "amount": 1000,
    "phone": "+79001234567",
    "description": "–û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥",
    "qr_code": "CUSTOM_QR_CODE"
}
```

## üí∞ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

### **MBank**
- **URL**: `https://app.mbank.kg/qr/#{qrCode}`
- **–ò–∫–æ–Ω–∫–∞**: üè¶
- **–¶–≤–µ—Ç**: #1E3A8A

### **ODengi**
- **URL**: `https://api.dengi.o.kg/#{qrCode}`
- **–ò–∫–æ–Ω–∫–∞**: üí∞
- **–¶–≤–µ—Ç**: #059669

### **Balance**
- **URL**: `https://balance.kg/payment_qr/#{qrCode}`
- **–ò–∫–æ–Ω–∫–∞**: ‚öñÔ∏è
- **–¶–≤–µ—Ç**: #DC2626

### **Optima Bank**
- **URL**: `https://optimabank.kg/index.php?lang=ru#{qrCode}`
- **–ò–∫–æ–Ω–∫–∞**: üèõÔ∏è
- **–¶–≤–µ—Ç**: #7C3AED

## üîß –û–±—Ä–∞–±–æ—Ç–∫–∞ QR-–∫–æ–¥–æ–≤

### **Optima Bank**
- **–í—Ö–æ–¥**: –ü–æ–ª–Ω—ã–π URL —Å QR-–∫–æ–¥–æ–º –ø–æ—Å–ª–µ #
- **–û–±—Ä–∞–±–æ—Ç–∫–∞**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ QR-–∫–æ–¥–∞ –∏–∑ URL
- **–í—ã—Ö–æ–¥**: –¢–æ–ª—å–∫–æ QR-–∫–æ–¥ –¥–ª—è –≤—à–∏–≤–∞–Ω–∏—è –≤ –¥–∏–ø–ª–∏–Ω–∫–∏

### **–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```
–í—Ö–æ–¥:  https://optimabank.kg/index.php?lang=ru#00020101021132650011QR.Optima.20103213101610918209361301831107176085812021113021233360032473798579d3144969cd3f75b299dadf65204999953034175907ZENTARA6304660E

–í—ã—Ö–æ–¥: 00020101021132650011QR.Optima.20103213101610918209361301831107176085812021113021233360032473798579d3144969cd3f75b299dadf65204999953034175907ZENTARA6304660E
```

## üì± –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã

### **–ß—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:**
1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫** —Å —Ç–∏–ø–æ–º –æ–ø–µ—Ä–∞—Ü–∏–∏
2. **–°—É–º–º–∞** –ø–ª–∞—Ç–µ–∂–∞
3. **–î–µ—Ç–∞–ª–∏**: ID –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞, ID –∫–ª–∏–µ–Ω—Ç–∞, —Ç–µ–ª–µ—Ñ–æ–Ω
4. **QR-–∫–æ–¥** (–µ—Å–ª–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω)
5. **–î–∏–ø–ª–∏–Ω–∫–∏** –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

### **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω:**
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –ö—Ä–∞—Å–∏–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **1. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
```bash
php -S localhost:8000
```

### **2. –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**
–û—Ç–∫—Ä–æ–π—Ç–µ `test_payment_api.html` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤.

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ API**
```bash
curl -X GET http://localhost:8000/payment_api.php
```

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –ª–æ–≥–∏ –≤:
- **`payment_api.log`** - –ª–æ–≥–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
- **`payment_page.log`** - –ª–æ–≥–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–ø–ª–∞—Ç—ã (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** HTML —Å–∏–º–≤–æ–ª–æ–≤
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

## üìà –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Altegio**
```php
// –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É
$paymentData = [
    'type' => 'subscription_payment',
    'amount' => 2000,
    'phone' => $clientPhone,
    'subscription_id' => $subscriptionId,
    'client_id' => $clientId,
    'type' => 'renewal'
];

$response = sendPaymentRequest($paymentData);
$paymentPageUrl = $response['data']['payment_page_url'];
```

### **2. –û–±—Ä–∞–±–æ—Ç–∫–∞ QR-–∫–æ–¥–∞ –æ—Ç Optima**
```php
$optimaData = [
    'type' => 'optima_qr',
    'qrUrl' => $qrUrl,
    'qrBase64' => $qrBase64,
    'amount' => $amount,
    'phone' => $phone
];

$response = sendPaymentRequest($optimaData);
$deeplinks = $response['data']['deeplinks'];
```

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### **–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

1. **API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ PHP —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫

2. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

3. **–î–∏–ø–ª–∏–Ω–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å QR-–∫–æ–¥–æ–≤
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–æ–∫

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ –≤ `payment_api.log`
2. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
3. –°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
4. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–∞—à–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏. –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã, API —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã –∫—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞.

**–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –ø–ª–∞—Ç–µ–∂–µ–π!** üöÄ
