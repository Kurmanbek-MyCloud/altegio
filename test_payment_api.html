<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç Payment API</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        h1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            font-size: 2.5em;
            margin: 0;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .tab {
            flex: 1;
            padding: 20px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #6c757d;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab:hover {
            background: #e9ecef;
            color: #495057;
        }
        
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: white;
        }
        
        .tab-content {
            display: none;
            padding: 40px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        h3 {
            color: #495057;
            margin-bottom: 10px;
            font-size: 1.8em;
        }
        
        p {
            color: #6c757d;
            margin-bottom: 30px;
            font-size: 16px;
        }
        
        .example-data {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 4px solid #667eea;
        }
        
        .example-data h4 {
            color: #495057;
            margin-bottom: 15px;
        }
        
        pre {
            background: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 14px;
            color: #495057;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #495057;
            font-weight: 500;
        }
        
        input, select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.3s ease;
            width: 100%;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        .result {
            margin: 30px;
            padding: 20px;
            border-radius: 10px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .result.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .result.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .result.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç Payment API</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('altegio')">Altegio</button>
            <button class="tab" onclick="showTab('subscription')">–ê–±–æ–Ω–µ–º–µ–Ω—Ç</button>
            <button class="tab" onclick="showTab('custom')">–ö–∞—Å—Ç–æ–º–Ω—ã–π</button>
        </div>
        
        <!-- Altegio -->
        <div id="altegio" class="tab-content active">
            <h3>üè¢ Altegio Payment Request</h3>
            <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç Altegio –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏</p>
            
            <div class="example-data">
                <h4>–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:</h4>
                <pre>{
    "type": "altegio_payment",
    "comment": "–û–ø–ª–∞—Ç–∞ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ #12345",
    "amount": 2000,
    "numberClient": "67890"
}</pre>
            </div>
            
            <div class="form-group">
                <label for="altegio_comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                <input type="text" id="altegio_comment" value="–û–ø–ª–∞—Ç–∞ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ #12345" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π">
            </div>
            
            <div class="form-group">
                <label for="altegio_amount">–°—É–º–º–∞:</label>
                <input type="number" id="altegio_amount" value="2000" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
            </div>
            
            <div class="form-group">
                <label for="altegio_numberClient">–ù–æ–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞:</label>
                <input type="text" id="altegio_numberClient" value="67890" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞">
            </div>
            
            <button onclick="testAltegioPayment()">–ü–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã</button>
        </div>
        
        <!-- –ê–±–æ–Ω–µ–º–µ–Ω—Ç -->
        <div id="subscription" class="tab-content">
            <h3>üîÑ –û–ø–ª–∞—Ç–∞ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞</h3>
            <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞</p>
            
            <div class="example-data">
                <h4>–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:</h4>
                <pre>{
    "type": "subscription_payment",
    "amount": 1500,
    "phone": "+79001234567",
    "subscription_id": "12345",
    "client_id": "67890",
    "type": "renewal"
}</pre>
            </div>
            
            <div class="form-group">
                <label for="subscription_amount">–°—É–º–º–∞:</label>
                <input type="number" id="subscription_amount" value="1500" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
            </div>
            
            <div class="form-group">
                <label for="subscription_phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                <input type="tel" id="subscription_phone" value="+79001234567" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω">
            </div>
            
            <div class="form-group">
                <label for="subscription_subscription_id">ID –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞:</label>
                <input type="number" id="subscription_subscription_id" value="12345" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞">
            </div>
            
            <div class="form-group">
                <label for="subscription_client_id">ID –∫–ª–∏–µ–Ω—Ç–∞:</label>
                <input type="number" id="subscription_client_id" value="67890" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∫–ª–∏–µ–Ω—Ç–∞">
            </div>
            
            <div class="form-group">
                <label for="subscription_type">–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏:</label>
                <select id="subscription_type">
                    <option value="renewal">–ü—Ä–æ–¥–ª–µ–Ω–∏–µ</option>
                    <option value="new_subscription">–ù–æ–≤—ã–π –∞–±–æ–Ω–µ–º–µ–Ω—Ç</option>
                </select>
            </div>
            
            <button onclick="testSubscriptionPayment()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–ø–ª–∞—Ç—É –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞</button>
        </div>
        
        <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–π -->
        <div id="custom" class="tab-content">
            <h3>‚öôÔ∏è –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø–ª–∞—Ç–µ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å</h3>
            <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞</p>
            
            <div class="example-data">
                <h4>–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:</h4>
                <pre>{
    "type": "custom_payment",
    "amount": 3000,
    "phone": "+79001234567",
    "description": "–û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥",
    "qr_code": "CUSTOM_QR_CODE"
}</pre>
            </div>
            
            <div class="form-group">
                <label for="custom_amount">–°—É–º–º–∞:</label>
                <input type="number" id="custom_amount" value="3000" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
            </div>
            
            <div class="form-group">
                <label for="custom_phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                <input type="tel" id="custom_phone" value="+79001234567" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω">
            </div>
            
            <div class="form-group">
                <label for="custom_description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <input type="text" id="custom_description" value="–û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ">
            </div>
            
            <div class="form-group">
                <label for="custom_qr_code">QR –∫–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
                <input type="text" id="custom_qr_code" value="CUSTOM_QR_CODE" placeholder="–í–≤–µ–¥–∏—Ç–µ QR –∫–æ–¥">
            </div>
            
            <button onclick="testCustomPayment()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø–ª–∞—Ç–µ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å</button>
        </div>
        
        <div id="result" class="result" style="display: none;"></div>
    </div>

    <script>
        function showTab(tabName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabName).classList.add('active');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –∫–Ω–æ–ø–∫–µ
            event.target.classList.add('active');
        }
        
        function showResult(message, type = 'info') {
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = message;
            resultDiv.className = `result ${type}`;
            resultDiv.style.display = 'block';
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        function testAltegioPayment() {
            const data = {
                type: 'altegio_payment',
                comment: document.getElementById('altegio_comment').value,
                amount: parseInt(document.getElementById('altegio_amount').value),
                numberClient: document.getElementById('altegio_numberClient').value
            };
            
            sendRequest(data);
        }
        
        function testSubscriptionPayment() {
            const data = {
                type: 'subscription_payment',
                amount: parseInt(document.getElementById('subscription_amount').value),
                phone: document.getElementById('subscription_phone').value,
                subscription_id: document.getElementById('subscription_subscription_id').value,
                client_id: document.getElementById('subscription_client_id').value,
                payment_type: document.getElementById('subscription_type').value
            };
            
            sendRequest(data);
        }
        
        function testCustomPayment() {
            const data = {
                type: 'custom_payment',
                amount: parseInt(document.getElementById('custom_amount').value),
                phone: document.getElementById('custom_phone').value,
                description: document.getElementById('custom_description').value,
                qr_code: document.getElementById('custom_qr_code').value
            };
            
            sendRequest(data);
        }
        
        function sendRequest(data) {
            showResult('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞...', 'info');
            
            fetch('payment_api.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    let responseText = `‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã:\n\n${result.payment_page_url}`;
                    
                    if (result.qr_code) {
                        responseText += `\n\nüîç QR-–∫–æ–¥ (${result.qr_source}):\n${result.qr_code}`;
                    }
                    
                    showResult(responseText, 'success');
                } else {
                    showResult(`‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:\n${result.error}`, 'error');
                }
            })
            .catch(error => {
                showResult(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:\n${error.message}`, 'error');
            });
        }
    </script>
</body>
</html>
